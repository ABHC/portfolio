services:
  app:
    build:
      context: .
      dockerfile: frontend/Dockerfile
    container_name: portfolio
    restart: unless-stopped
    ports:
      - "3001:3000"
    environment:
      ORIGIN: "https://combe.tf"
    networks:
      - web

networks:
  web:
    external: true

healthcheck:
  test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000', r => { if (r.statusCode !== 200) process.exit(1) })"]
  interval: 30s
  timeout: 3s
  retries: 3
